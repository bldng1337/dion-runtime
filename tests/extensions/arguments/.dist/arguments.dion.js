//{"id":"arguments","name":"arguments","url":"www.example.com","icon":"www.example.com/icon.png","lang":[],"nsfw":false,"media_type":["Book"],"extension_type":[],"version":"1.0.0","license":"ISC","api_version":"*","repo":"string"}
import{fetch as o}from"network";import{getSetting as c}from"setting";class u{async validate(r){return r}async onEvent(r){switch(r.type){case"Action":return;case"FeedUpdate":return{type:r.type,customui:[],hasnext:null,length:null};case"SwapContent":return{type:r.type,customui:{type:"Text",text:"asd"}}}}async mapSource(r,n,e){return{source:r,settings:e}}async mapEntry(r,n){return{entry:r,settings:n}}async onEntryActivity(r,n,e){}async browse(r){let n=await a();return{content:(await o(`${n}/getEntries`)).json}}async search(r,n){let e=await a();return{content:(await o(`${e}/getEntries`)).json}}async handleUrl(r){return!0}async detail(r,n){let e=await a();return{entry:(await o(`${e}/getEntry`)).json,settings:n}}async source(r,n){let e=await a();return{source:(await o(`${e}/getSource`)).json,settings:n}}}async function a(){let r=await c("testdataserver","Extension"),n=r.value.data;if(r.value.type!=="String")throw Error("Failed to get Server");if(n.endsWith("/"))return n.substring(0,n.length-1);return n}function t(r,n="Extension error"){if(!r)throw new Error(`Assert failed: ${n}`)}class s extends u{browse(r){return t(typeof r==="number","Argument page of browse is not a number"),super.browse(r)}detail(r,n){return t(typeof r==="object"&&typeof r.uid==="string","Argument entryid of detail is not a string"),t(typeof n==="object"&&n!==null,"Argument settings of detail is not an object"),super.detail(r,n)}handleUrl(r){return t(typeof r==="string","Argument url of fromUrl is not a string"),super.handleUrl(r)}mapEntry(r,n){return t(typeof r==="object"&&r!==null,"Argument entry of mapEntry is not an object"),t(typeof n==="object"&&n!==null,"Argument settings of mapEntry is not an object"),super.mapEntry(r,n)}mapSource(r,n,e){return t(typeof r==="object"&&r!==null,"Argument source of mapSource is not an object"),t(typeof n==="object"&&typeof n.uid==="string","Argument epid of source is not a string"),t(typeof e==="object"&&e!==null,"Argument settings of mapSource is not an object"),super.mapSource(r,n,e)}onEntryActivity(r,n,e){return t(typeof r==="object"&&r!==null,"Argument activity of onEntryActivity is not an object"),t(typeof n==="object"&&n!==null,"Argument entry of onEntryActivity is not an object"),t(typeof e==="object"&&e!==null,"Argument settings of onEntryActivity is not an object"),super.onEntryActivity(r,n,e)}search(r,n){return t(typeof r==="number","Argument page of search is not a number"),t(typeof n==="string","Argument filter of search is not a string"),super.search(r,n)}source(r,n){return t(typeof r==="object"&&typeof r.uid==="string","Argument epid of source is not a string"),t(typeof n==="object"&&n!==null,"Argument settings of source is not an object"),super.source(r,n)}}export{s as default};
