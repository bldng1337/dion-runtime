//{"id":"decode","name":"decode","url":"www.example.com","icon":"www.example.com/icon.png","lang":[],"nsfw":false,"media_type":["Book"],"extension_type":[],"version":"1.0.0","license":"ISC","api_version":"*","repo":"string"}
import{fetch as o}from"network";import{getSetting as c}from"setting";class s{async validate(e){return e}async onEvent(e){switch(e.type){case"Action":return;case"FeedUpdate":return{type:e.type,customui:[],hasnext:null,length:null};case"SwapContent":return{type:e.type,customui:{type:"Text",text:"asd"}}}}async mapSource(e,t,n){return{source:e,settings:n}}async mapEntry(e,t){return{entry:e,settings:t}}async onEntryActivity(e,t,n){}async browse(e){let t=await i();return{content:(await o(`${t}/getEntries`)).json}}async search(e,t){let n=await i();return{content:(await o(`${n}/getEntries`)).json}}async handleUrl(e){return!0}async detail(e,t){let n=await i();return{entry:(await o(`${n}/getEntry`)).json,settings:t}}async source(e,t){let n=await i();return{source:(await o(`${n}/getSource`)).json,settings:t}}}async function i(){let e=await c("testdataserver","Extension"),t=e.value.data;if(e.value.type!=="String")throw Error("Failed to get Server");if(t.endsWith("/"))return t.substring(0,t.length-1);return t}function r(e,t="Extension error"){if(!e)throw Error(`Assert failed: ${t}`)}import{decodeBase64 as u,encodeBase64 as y}from"convert";class m extends s{async load(){r(u("YXNk")==="asd","decode_base64 not working"),r(y("asd")==="YXNk","encode_base64 not working");let e=["test","some text","some other text",`some text
some other text`,""," ",`
`];for(let t of e)r(u(y(t))===t,`decode_base64 or encode_base64 not working for ${t}`);for(let t of e)r(atob(btoa(t))===t,`atob or btoa not working for ${t}`)}}export{m as default};
