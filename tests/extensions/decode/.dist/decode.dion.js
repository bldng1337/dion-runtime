//{"id":"decode","name":"decode","url":"www.example.com","icon":"www.example.com/icon.png","lang":[],"nsfw":false,"media_type":["Book"],"extension_type":[],"version":"1.0.0","license":"ISC","api_version":"*","repo":"string"}
import{fetch as n}from"network";import{getSetting as c}from"setting";class s{async validate(t){return t}async onEvent(t){switch(t.type){case"Action":return;case"FeedUpdate":return{type:t.type,customui:[],hasnext:null,length:null};case"SwapContent":return{type:t.type,customui:{type:"Text",text:"asd"}}}}async mapSource(t,e,r){return{source:t,settings:r}}async mapEntry(t,e){return{entry:t,settings:e}}async onEntryActivity(t,e,r){}async browse(t){let e=await o();return{content:(await n(`${e}/getEntries`)).json}}async search(t,e){let r=await o();return{content:(await n(`${r}/getEntries`)).json}}async handleUrl(t){return!0}async detail(t,e){let r=await o();return{entry:(await n(`${r}/getEntry`)).json,settings:e}}async source(t,e){let r=await o();return{source:(await n(`${r}/getSource`)).json,settings:e}}}async function o(){let t=await c("testdataserver","Extension"),e=t.value.data;if(t.value.type!=="String")throw Error("Failed to get Server");if(e.endsWith("/"))return e.substring(0,e.length-1);return e}function i(t,e="Extension error"){if(!t)throw new Error(`Assert failed: ${e}`)}import{decodeBase64 as u,encodeBase64 as y}from"convert";class m extends s{async load(){i(u("YXNk")==="asd","decode_base64 not working"),i(y("asd")==="YXNk","encode_base64 not working");let t=["test","some text","some other text",`some text
some other text`,""," ",`
`];for(let e of t)i(u(y(e))===e,`decode_base64 or encode_base64 not working for ${e}`)}}export{m as default};
