//{"id":"decode","name":"decode","url":"www.example.com","icon":"www.example.com/icon.png","lang":[],"nsfw":false,"media_type":["Book"],"extension_type":[],"version":"1.0.0","license":"ISC","api_version":"*","repo":"string"}
import{fetch as n}from"network";import{getSetting as c}from"setting";class s{async onEvent(e){switch(e.type){case"Action":return;case"FeedUpdate":return{type:e.type,customui:[],hasnext:null,length:null};case"SwapContent":return{type:e.type,customui:{type:"Text",text:"asd"}}}}async mapSource(e,t,r){return{source:e,settings:r}}async mapEntry(e,t){return{entry:e,settings:t}}async onEntryActivity(e,t,r){}async browse(e){let t=await o();return{content:(await n(`${t}/getEntries`)).json}}async search(e,t){let r=await o();return{content:(await n(`${r}/getEntries`)).json}}async handleUrl(e){return!0}async detail(e,t){let r=await o();return{entry:(await n(`${r}/getEntry`)).json,settings:t}}async source(e,t){let r=await o();return{source:(await n(`${r}/getSource`)).json,settings:t}}}async function o(){let e=await c("testdataserver","Extension"),t=e.value.data;if(e.value.type!=="String")throw Error("Failed to get Server");if(t.endsWith("/"))return t.substring(0,t.length-1);return t}function i(e,t="Extension error"){if(!e)throw new Error(`Assert failed: ${t}`)}import{decodeBase64 as u,encodeBase64 as y}from"convert";class m extends s{async load(){i(u("YXNk")==="asd","decode_base64 not working"),i(y("asd")==="YXNk","encode_base64 not working");let e=["test","some text","some other text",`some text
some other text`,""," ",`
`];for(let t of e)i(u(y(t))===t,`decode_base64 or encode_base64 not working for ${t}`)}}export{m as default};
